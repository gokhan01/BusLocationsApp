@{
    ViewData["Title"] = "Home Page";
    Layout = null;
}

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bilet Arama</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link href="~/lib/datepicker/datepicker.min.css" rel="stylesheet" />
    <style>
        .wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f8f9fa;
        }

        .card {
            width: 320pt;
        }

        .card-header {
            background-color: #2F4EB4;
            height: 40pt;
        }

        .card-body {
            background-color: #F8F8F8;
        }

        .text-primary {
            color: #2F4EB4 !important;
        }

        .btn-primary {
            background-color: #2F4EB4 !important;
        }

        /* .inline-card {
                                    background-color: white;
                                    width: auto;
                                    height: 64pt;
                                    padding: 5pt;
                                    display: flex !important;
                                    align-items: center !important;
                                } */

        .inline-card {
            background-color: white;
            width: auto;
            height: 64pt;
            padding: 5pt;
        }

        /* .select2-container--default .select2-selection--single {
                    border: none;
                } */

        /* Select2 border'ını kaldır */
        .select2-container .select2-selection--single {
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
        }

            /* Select2 arrow (ok) ikonunu kaldır */
            .select2-container .select2-selection--single .select2-selection__arrow {
                display: none;
            }

        /* Select2 dropdown arrow'ı kaldır */
        .select2-container--default .select2-selection--single .select2-selection__arrow b {
            display: none;
        }

        /* Input yazısını sola yasla */
        .select2-container .select2-selection--single .select2-selection__rendered {
            text-align: left !important;
            padding-left: 15px !important; /* İsteğe bağlı: Yazının sol boşluğunu ayarlar */
        }
    </style>
</head>
<body class="bg-light">
    <div class="wrapper">


        <div class="card text-center">
            <div class="card-header"></div>
            <div class="card-body">
                <form asp-action="Index" asp-controller="Journeys" method="GET">
                    <div class="inline-card mb-2">
                        <!-- Başlık -->
                        <div class="row">
                            <div class="col offset-1 ps-3">
                                <strong class="text-primary mb-2 float-start">Nereden</strong>
                            </div>
                        </div>

                        <!-- İçerik -->
                        <div class="row align-items-center">
                            <!-- Icon ve Select Elementi -->
                            <div class="col d-flex align-items-center">
                                <!-- Icon -->
                                <i class="bi bi-geo-alt text-muted me-2"></i>

                                <!-- Select -->
                                <select class="origins-select form-select" name="originId" style="width: 75%;"></select>
                            </div>
                        </div>
                    </div>

                    <!-- Sağ Taraf -->
                    <div class="inline-card mb-4">
                        <!-- Başlık -->
                        <div class="row">
                            <div class="col offset-1 ps-3">
                                <strong class="text-primary mb-2 float-start">Nereye</strong>
                            </div>
                        </div>

                        <!-- İçerik -->
                        <div class="row align-items-center">
                            <!-- Icon ve Select Elementi -->
                            <div class="col d-flex align-items-center">
                                <!-- Icon -->
                                <i class="bi bi-geo-alt text-muted me-2"></i>

                                <!-- Select -->
                                <select class="destinations-select form-select" name="destinationId" style="width: 75%;"></select>
                            </div>
                        </div>
                    </div>

                    <div class="inline-card mb-4">
                        <div class="row">
                            <div class="col-8">
                                <div class="row">
                                    <div class="col offset-1 ps-4">
                                        <strong class="text-primary mb-2 float-start">Tarih</strong>
                                    </div>
                                </div>

                                <!-- İçerik -->
                                <div class="row align-items-center">
                                    <!-- Icon ve Select Elementi -->
                                    <div class="col d-flex align-items-center">
                                        <!-- Icon -->
                                        <i class="bi bi-calendar3 text-muted me-2"></i>

                                        <!-- Select -->
                                        <input type="text" class="form-control datepicker" id="departureDateInput" name="departureDate" value="@DateTime.Today.ToString("dd-MM-yyyy")" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="d-flex flex-column">
                                    <button class="btn btn-secondary btn-sm mb-2" id="todayButton">Bugün</button>
                                    <button class="btn btn-outline-secondary btn-sm" id="tomorrowButton">Yarın</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="d-grid gap-2 col-6 mx-auto  mb-4">
                        <button class="btn btn-primary" type="submit" id="findTicketButton">Bileti Bul</button>
                    </div>
                </form>
            </div>
            <div class="card-footer text-muted bg-white">
                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum</p>
            </div>
        </div>





    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="~/lib/datepicker/datepicker.min.js"></script>
    <script src="~/lib/datepicker/i18n/datepicker.tr-tr.min.js"></script>
    <script>
                // In your Javascript (external .js resource or <script> tag)
        $(document).ready(function() {
            $('.datepicker').datepicker({
                language:'tr-TR',
                startDate: '1d',
            });

            // Sayfa yüklendiğinde tüm ürün listesini çek
            $.ajax({
                url: '@Url.Action("Get", "BusLocations")',
                type: 'GET',
                success: function (data) {
                    // Select2'yi tüm liste ile doldur
                    console.log(data)

                    $('.origins-select').select2({
                        data: data,
                        // ajax: {
                        //     url: '@Url.Action("Get", "BusLocations")', // Controller'daki action metodu
                        //     dataType: 'json',
                        //     delay: 250, // Kullanıcı yazmayı durdurduktan 250ms sonra istek gönder
                        //     data: function (params) {
                        //         return {
                        //             term: params.term // Kullanıcının yazdığı anahtar kelime
                        //         };
                        //     },
                        //     processResults: function (data) {
                        //         console.log('processResults',data)
                        //         return {
                        //             results: data.results // Controller'dan dönen sonuçlar
                        //         };
                        //     },
                        //     cache: true // İstekleri önbelleğe al
                        // },
                        // minimumInputLength: 3 // Arama için en az 3 karakter gerektir
                    });

                    $('.destinations-select').select2({
                        data: data
                    });
                }
            });

            // Bugünün tarihini yazdır
            $('#todayButton').click(function () {
                const today = new Date();
                $('#departureDateInput').datepicker('setDate', today);
            });

            // Yarının tarihini yazdır
            $('#tomorrowButton').click(function () {
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1); // Yarının tarihini hesapla
                $('#departureDateInput').datepicker('setDate', tomorrow);
            });
        });
    </script>
</body>
</html>





